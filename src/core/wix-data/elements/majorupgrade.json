{
  "$schema": "../schema/element.schema.json",
  "name": "MajorUpgrade",
  "namespace": "wix",
  "since": "v3",
  "description": "Simplifies authoring for major upgrades, automatically handling detection and removal of older versions.",
  "documentation": "https://wixtoolset.org/docs/schema/wxs/majorupgrade/",
  "parents": ["Package"],
  "children": [],
  "attributes": {
    "AllowDowngrades": {
      "type": "yesno",
      "required": false,
      "default": "no",
      "description": "Whether to allow installing older versions over newer ones."
    },
    "AllowSameVersionUpgrades": {
      "type": "yesno",
      "required": false,
      "default": "no",
      "description": "Whether to allow reinstalling the same version."
    },
    "Disallow": {
      "type": "yesno",
      "required": false,
      "default": "no",
      "description": "Whether to disallow upgrades."
    },
    "DowngradeErrorMessage": {
      "type": "string",
      "required": false,
      "description": "Error message to show when downgrade is attempted."
    },
    "DisallowUpgradeErrorMessage": {
      "type": "string",
      "required": false,
      "description": "Error message when upgrade is disallowed."
    },
    "MigrateFeatures": {
      "type": "yesno",
      "required": false,
      "default": "yes",
      "description": "Whether to migrate feature states from the older version."
    },
    "Schedule": {
      "type": "enum",
      "required": false,
      "values": ["afterInstallValidate", "afterInstallInitialize", "afterInstallExecute", "afterInstallExecuteAgain", "afterInstallFinalize"],
      "default": "afterInstallValidate",
      "description": "When to remove the existing product."
    }
  },
  "msiTables": ["Upgrade"],
  "examples": [
    {
      "description": "Standard major upgrade with downgrade prevention",
      "code": "<MajorUpgrade DowngradeErrorMessage=\"A newer version of [ProductName] is already installed.\" />"
    }
  ]
}
