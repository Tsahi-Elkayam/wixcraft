{
  "$schema": "../schema/rule.schema.json",
  "rules": [
    {
      "id": "file-source-required",
      "name": "File requires Source",
      "description": "File element must have a Source attribute to specify the file to include",
      "severity": "error",
      "element": "File",
      "condition": "!attributes.Source",
      "message": "File element must have a Source attribute."
    },
    {
      "id": "file-keypath-recommended",
      "name": "File should be KeyPath",
      "description": "If a component contains a single file, it should be marked as KeyPath",
      "severity": "info",
      "element": "File",
      "condition": "parent.countChildren('File') === 1 && attributes.KeyPath !== 'yes'",
      "message": "Consider adding KeyPath=\"yes\" to this file since it's the only file in the component."
    },
    {
      "id": "file-avoid-shortfilename",
      "name": "Avoid short file names",
      "description": "Short file names (8.3 format) are legacy and rarely needed",
      "severity": "warning",
      "element": "File",
      "condition": "attributes.ShortName",
      "message": "ShortName is rarely needed on modern Windows. Consider removing it unless targeting legacy systems."
    },
    {
      "id": "file-assembly-application",
      "name": ".NET assemblies need Assembly attribute",
      "description": ".NET assembly files should have Assembly attribute set",
      "severity": "info",
      "element": "File",
      "condition": "attributes.Source && attributes.Source.endsWith('.dll') && !attributes.Assembly",
      "message": "This appears to be a .NET DLL. If it's a .NET assembly, add Assembly=\".net\" or Assembly=\"win32\"."
    }
  ]
}
