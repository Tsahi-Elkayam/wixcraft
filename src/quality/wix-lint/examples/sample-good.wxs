<?xml version="1.0" encoding="UTF-8"?>
<!--
    sample-good.wxs - A well-structured WiX file

    This file follows WiX best practices and should pass
    linting with minimal or no issues.
-->
<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs">
  <Package Name="GoodApp"
           Manufacturer="Acme Corporation"
           Version="1.0.0"
           UpgradeCode="12345678-1234-1234-1234-123456789012">

    <!-- Proper upgrade handling -->
    <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />

    <!-- Media configuration -->
    <MediaTemplate EmbedCab="yes" CompressionLevel="high" />

    <!-- Use StandardDirectory for proper paths -->
    <StandardDirectory Id="ProgramFilesFolder">
      <Directory Id="INSTALLFOLDER" Name="GoodApp">

        <!-- Main application component - one primary file -->
        <Component Id="MainExecutable" Guid="*">
          <File Id="AppExe" Source="app.exe" KeyPath="yes" />
        </Component>

        <!-- Separate component for each DLL (best practice) -->
        <Component Id="CoreLibrary" Guid="*">
          <File Id="CoreDll" Source="core.dll" KeyPath="yes" />
        </Component>

        <Component Id="UtilsLibrary" Guid="*">
          <File Id="UtilsDll" Source="utils.dll" KeyPath="yes" />
        </Component>

        <!-- Configuration files in their own component -->
        <Directory Id="ConfigDir" Name="config">
          <Component Id="ConfigFiles" Guid="*">
            <File Id="AppConfig" Source="app.config" KeyPath="yes" />
          </Component>
        </Directory>

      </Directory>
    </StandardDirectory>

    <!-- Start Menu shortcuts -->
    <StandardDirectory Id="ProgramMenuFolder">
      <Directory Id="ApplicationProgramsFolder" Name="GoodApp">
        <Component Id="StartMenuShortcut" Guid="*">
          <Shortcut Id="AppShortcut"
                    Name="GoodApp"
                    Target="[INSTALLFOLDER]app.exe"
                    WorkingDirectory="INSTALLFOLDER" />
          <RemoveFolder Id="CleanupShortcutFolder" On="uninstall" />
          <RegistryValue Root="HKCU"
                         Key="Software\AcmeCorp\GoodApp"
                         Name="installed"
                         Type="integer"
                         Value="1"
                         KeyPath="yes" />
        </Component>
      </Directory>
    </StandardDirectory>

    <!-- Feature hierarchy with proper attributes -->
    <Feature Id="ProductFeature" Title="GoodApp" Level="1" Description="Main application">
      <ComponentRef Id="MainExecutable" />
      <ComponentRef Id="CoreLibrary" />
      <ComponentRef Id="UtilsLibrary" />
      <ComponentRef Id="ConfigFiles" />
      <ComponentRef Id="StartMenuShortcut" />
    </Feature>

    <!-- Properties with safe defaults -->
    <Property Id="WIXUI_INSTALLDIR" Value="INSTALLFOLDER" />

    <!-- UI reference (if using WixUI) -->
    <!-- <UIRef Id="WixUI_InstallDir" /> -->

  </Package>
</Wix>
